function Resultados(){"use strict";var s=this;s.CargarCuestion=function(){var t={empresa:empresa,estatus:0},a={empresa:empresa,estatus:1},e="<option val=''>Selecciona</option>";help.senddataa(t,"resultados/MuestraCues",function(t){e+="<optgroup label='Desactivados'>",$.each(t.cuestionarios,function(t,a){e+="<option value='"+a.IDCuestionario+"'>"+a.Nombre+"</option>"}),e+="</optgroup>",$("#cuestion").html(e)}),help.senddataa(a,"resultados/MuestraCues",function(t){e+="<optgroup label='Activados'>",$.each(t.cuestionarios,function(t,a){e+="<option value='"+a.IDCuestionario+"'>"+a.Nombre+"</option>"}),e+="</optgroup>",$("#cuestion").html(e)})},s.CargaResumen=function(o){var t={numC:o};help.senddataa(t,"resultados/Resumen",function(t){$("#cvs-detalles").attr("href","http://"+window.location.host+"/adminqval/resultados/detalles_cvs?num="+o),$("#cvs-resumen").attr("href","http://"+window.location.host+"/adminqval/resultados/resumen_cvs?num="+o),$(".datos .nombre").text(t.perfiles[0].Nombre);var a=t.perfiles[0].Status;1==a?$(".datos .Estatus").text("Activado"):0==a&&$(".datos .Estatus").text("Desactivado"),$(".datos .Pemisor").text(t.perfiles[0].Emisor),$(".datos .Preceptor").text(t.perfiles[0].Receptor),$(".Numveces").text("Datos recopilados de "+t.numerodeveces+" veces que se realizo este cuestionario."),s.ponergraficar(t.graficos);var e="";$.each(t.Resumen,function(t,a){e+="<tr><td>"+a.Pregunta+"</td><td>"+a.RespuestaPos+"</td><td>"+a.Trespuestas+"</td><td>"+a.Trespuestaspos+"</td></tr>"}),$("#tbresumenbody").html(e);e="";$.each(t.detalles,function(t,a){e+="<tr><td>"+a.Pregunta+"</td><td>"+a.Fecha+"</td><td>"+a.Emisor+"</td><td>"+a.Receptor+"</td><td>"+a.Respuesta+"</td><td>"+a.Puntos+"</td></tr>"}),$("#tbdetallebody").html(e)})},s.ponergraficar=function(t){var e="";$.each(t,function(t,a){e+="<div class='col-6'><div class='contgrap'><canvas id='grap"+t+"' width='100%' height='100%'></canvas></div></div>"}),$("#graficos2").html(e),$.each(t,function(t,a){"SI/NO"!=a.Forma?s.graficabarra("grap"+t,a.data,a.labels,a.Pregunta,a.backgroundColor):s.graficarCirc("grap"+t,a.labels,a.backgroundColor,a.data,a.Pregunta,a.Forma)})},s.graficarCirc=function(t,a,e,o,s,r){new Chart(document.getElementById(t),{type:"pie",data:{labels:a,datasets:[{label:"no se que va",backgroundColor:"#EAB252",data:o}]},options:{title:{display:!0,text:s+" ("+r+")"}}})},s.graficabarra=function(t,a,e,o,s){new Chart(t,{type:"bar",data:{labels:e,datasets:[{label:"que epdo",backgroundColor:s,data:a}]},options:{legend:{display:!1},title:{display:!0,text:o}}})},s.graficarArea=function(t,a,e,o,s){new Chart(s,{type:"line",data:{labels:t,datasets:[{label:a+" ("+e+")",data:o,backgroundColor:"#41255d"}]},options:{legend:{display:!0,position:"top",labels:{boxWidth:200,fontColor:"black"}}}})}}var resultado=new Resultados;$(function(){resultado.CargarCuestion(),$("#cuestion").on("change",function(){""!=$(this).val()&&resultado.CargaResumen($(this).val())})});